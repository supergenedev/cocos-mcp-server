---
description: Apply this rule when debugging, using debug agent, or working with debugging mode. Critical constraints: no fetch API, no external npm packages, absolute paths required for log files. Node.js v14.16.0 environment limitations.
keywords: debug, debugging, debug agent, 디버깅, debugging mode, debug mode, electron extension, node v14, fetch api, npm packages, log paths
alwaysApply: false
---

# ⚠️ 디버깅 모드 가이드 - 필수 적용

**이 룰은 디버깅, 디버그, debug, debugging, debug agent, 디버깅 모드 등의 키워드가 언급될 때 자동으로 적용되어야 합니다.**

이 프로젝트는 Electron 앱의 Extension으로 동작하며, 특정 환경 제약사항이 있습니다.

## 환경 제약사항

### Node.js 버전
- **Node 버전**: v14.16.0
- 이 버전은 구버전이므로 최신 기능을 사용할 수 없습니다.

### 사용 불가능한 기능

#### 1. fetch API 사용 금지
Node.js v14.16.0에는 내장 `fetch`가 없습니다. `fetch`를 사용하면 안 됩니다.

```typescript
// ❌ BAD - fetch는 사용 불가
const response = await fetch('https://api.example.com');

// ✅ GOOD - Node.js 내장 모듈 사용
import * as https from 'https';
import * as http from 'http';
// 또는
const https = require('https');
```

#### 2. 추가 패키지 다운로드 금지
Extension 환경에서는 추가 npm 패키지를 설치할 수 없습니다. Node.js 내장 모듈만 사용해야 합니다.

```typescript
// ❌ BAD - 외부 패키지 사용 불가
import axios from 'axios';
import node-fetch from 'node-fetch';

// ✅ GOOD - Node.js 내장 모듈만 사용
import * as fs from 'fs';
import * as path from 'path';
import * as http from 'http';
import * as https from 'https';
```

## 로깅 가이드

### 로그 경로 설정
로그 파일 경로는 **절대 경로(absolute path)**로 설정해야 합니다.

```typescript
// ❌ BAD - 상대 경로 사용
const logPath = './logs/debug.log';
const logPath = '../logs/debug.log';

// ✅ GOOD - 절대 경로 사용
import * as path from 'path';
import * as os from 'os';

const logPath = path.join(os.homedir(), '.cocos-mcp-server', 'debug.log');
// 또는
const logPath = '/Users/username/.cocos-mcp-server/debug.log';
```

### 로깅 예시

```typescript
import * as fs from 'fs';
import * as path from 'path';
import * as os from 'os';

function writeLog(message: string): void {
  const logDir = path.join(os.homedir(), '.cocos-mcp-server');
  const logPath = path.join(logDir, 'debug.log');

  // 디렉토리가 없으면 생성
  if (!fs.existsSync(logDir)) {
    fs.mkdirSync(logDir, { recursive: true });
  }

  const timestamp = new Date().toISOString();
  const logMessage = `[${timestamp}] ${message}\n`;

  fs.appendFileSync(logPath, logMessage, 'utf8');
}
```

## 디버깅 시 체크리스트

- [ ] `fetch` API를 사용하지 않았는가?
- [ ] 외부 npm 패키지를 import하지 않았는가?
- [ ] 로그 경로가 절대 경로로 설정되었는가?
- [ ] Node.js v14.16.0에서 지원하는 기능만 사용했는가?

## 자동 적용 트리거

이 룰은 다음 키워드가 언급될 때 자동으로 적용되어야 합니다:
- debug, debugging, debug agent, 디버깅
- debugging mode, debug mode
- electron extension 환경
- node v14, node.js v14.16.0
- fetch api, npm packages, log paths
