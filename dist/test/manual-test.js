"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.runAllTests = exports.testProjectTools = exports.testAssetTools = exports.testSceneTools = void 0;
/**
 * 手动测试脚本
 * 可以在 Cocos Creator 控制台中执行测试
 */
async function testSceneTools() {
    console.log('=== Testing Scene Tools ===');
    try {
        // 1. 获取场景信息
        console.log('1. Getting scene info...');
        const sceneInfo = await Editor.Message.request('scene', 'get-scene-info');
        console.log('Scene info:', sceneInfo);
        // 2. 创建节点
        console.log('\n2. Creating test node...');
        const createResult = await Editor.Message.request('scene', 'create-node', {
            name: 'TestNode_' + Date.now(),
            type: 'cc.Node'
        });
        console.log('Create result:', createResult);
        if (createResult && createResult.uuid) {
            const nodeUuid = createResult.uuid;
            // 3. 查询节点
            console.log('\n3. Querying node...');
            const nodeInfo = await Editor.Message.request('scene', 'query-node', {
                uuid: nodeUuid
            });
            console.log('Node info:', nodeInfo);
            // 4. 设置节点属性
            console.log('\n4. Setting node position...');
            await Editor.Message.request('scene', 'set-node-property', {
                uuid: nodeUuid,
                path: 'position',
                value: { x: 100, y: 200, z: 0 }
            });
            console.log('Position set successfully');
            // 5. 添加组件
            console.log('\n5. Adding Sprite component...');
            const addCompResult = await Editor.Message.request('scene', 'add-component', {
                uuid: nodeUuid,
                component: 'cc.Sprite'
            });
            console.log('Component added:', addCompResult);
            // 6. 查询组件
            console.log('\n6. Querying component...');
            const compInfo = await Editor.Message.request('scene', 'query-node-component', {
                uuid: nodeUuid,
                component: 'cc.Sprite'
            });
            console.log('Component info:', compInfo);
            // 7. 删除节点
            console.log('\n7. Removing test node...');
            await Editor.Message.request('scene', 'remove-node', {
                uuid: nodeUuid
            });
            console.log('Node removed successfully');
        }
    }
    catch (error) {
        console.error('Test failed:', error);
    }
}
exports.testSceneTools = testSceneTools;
async function testAssetTools() {
    console.log('\n=== Testing Asset Tools ===');
    try {
        // 1. 查询资源
        console.log('1. Querying image assets...');
        const assets = await Editor.Message.request('asset-db', 'query-assets', {
            pattern: '**/*.png',
            ccType: 'cc.ImageAsset'
        });
        console.log('Found assets:', (assets === null || assets === void 0 ? void 0 : assets.length) || 0);
        // 2. 获取资源信息
        console.log('\n2. Getting asset database info...');
        const assetInfo = await Editor.Message.request('asset-db', 'query-asset-info', {
            uuid: 'db://assets'
        });
        console.log('Asset info:', assetInfo);
    }
    catch (error) {
        console.error('Test failed:', error);
    }
}
exports.testAssetTools = testAssetTools;
async function testProjectTools() {
    console.log('\n=== Testing Project Tools ===');
    try {
        // 1. 获取项目信息
        console.log('1. Getting project info...');
        const projectInfo = await Editor.Message.request('project', 'query-info');
        console.log('Project info:', projectInfo);
        // 2. 检查构建能力
        console.log('\n2. Checking build capability...');
        const canBuild = await Editor.Message.request('project', 'can-build');
        console.log('Can build:', canBuild);
    }
    catch (error) {
        console.error('Test failed:', error);
    }
}
exports.testProjectTools = testProjectTools;
async function runAllTests() {
    console.log('Starting MCP Server Tools Test...\n');
    await testSceneTools();
    await testAssetTools();
    await testProjectTools();
    console.log('\n=== All tests completed ===');
}
exports.runAllTests = runAllTests;
// 导出到全局，方便在控制台调用
global.MCPTest = {
    testSceneTools,
    testAssetTools,
    testProjectTools,
    runAllTests
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFudWFsLXRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zb3VyY2UvdGVzdC9tYW51YWwtdGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQTs7O0dBR0c7QUFFSSxLQUFLLFVBQVUsY0FBYztJQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7SUFFM0MsSUFBSTtRQUNBLFlBQVk7UUFDWixPQUFPLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUM7UUFDeEMsTUFBTSxTQUFTLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUMxRSxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUV0QyxVQUFVO1FBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sWUFBWSxHQUFHLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLGFBQWEsRUFBRTtZQUN0RSxJQUFJLEVBQUUsV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDOUIsSUFBSSxFQUFFLFNBQVM7U0FDbEIsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUU1QyxJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsSUFBSSxFQUFFO1lBQ25DLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUM7WUFFbkMsVUFBVTtZQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUNyQyxNQUFNLFFBQVEsR0FBRyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxZQUFZLEVBQUU7Z0JBQ2pFLElBQUksRUFBRSxRQUFRO2FBQ2pC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cmUgY29uc3QgRWRpdG9yOiBhbnk7XG5cbi8qKlxuICog5omL5Yqo5rWL6K+V6ISa5pysXG4gKiDlj6/ku6XlnKggQ29jb3MgQ3JlYXRvciDmjqfliLblj7DkuK3miafooYzmtYvor5VcbiAqL1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdFNjZW5lVG9vbHMoKSB7XG4gICAgY29uc29sZS5sb2coJz09PSBUZXN0aW5nIFNjZW5lIFRvb2xzID09PScpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIC8vIDEuIOiOt+WPluWcuuaZr+S/oeaBr1xuICAgICAgICBjb25zb2xlLmxvZygnMS4gR2V0dGluZyBzY2VuZSBpbmZvLi4uJyk7XG4gICAgICAgIGNvbnN0IHNjZW5lSW5mbyA9IGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3NjZW5lJywgJ2dldC1zY2VuZS1pbmZvJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTY2VuZSBpbmZvOicsIHNjZW5lSW5mbyk7XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDliJvlu7roioLngrlcbiAgICAgICAgY29uc29sZS5sb2coJ1xcbjIuIENyZWF0aW5nIHRlc3Qgbm9kZS4uLicpO1xuICAgICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdjcmVhdGUtbm9kZScsIHtcbiAgICAgICAgICAgIG5hbWU6ICdUZXN0Tm9kZV8nICsgRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHR5cGU6ICdjYy5Ob2RlJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0ZSByZXN1bHQ6JywgY3JlYXRlUmVzdWx0KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjcmVhdGVSZXN1bHQgJiYgY3JlYXRlUmVzdWx0LnV1aWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVVdWlkID0gY3JlYXRlUmVzdWx0LnV1aWQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDMuIOafpeivouiKgueCuVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1xcbjMuIFF1ZXJ5aW5nIG5vZGUuLi4nKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVJbmZvID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnc2NlbmUnLCAncXVlcnktbm9kZScsIHtcbiAgICAgICAgICAgICAgICB1dWlkOiBub2RlVXVpZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm9kZSBpbmZvOicsIG5vZGVJbmZvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gNC4g6K6+572u6IqC54K55bGe5oCnXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXFxuNC4gU2V0dGluZyBub2RlIHBvc2l0aW9uLi4uJyk7XG4gICAgICAgICAgICBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdzZXQtbm9kZS1wcm9wZXJ0eScsIHtcbiAgICAgICAgICAgICAgICB1dWlkOiBub2RlVXVpZCxcbiAgICAgICAgICAgICAgICBwYXRoOiAncG9zaXRpb24nLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB7IHg6IDEwMCwgeTogMjAwLCB6OiAwIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Bvc2l0aW9uIHNldCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gNS4g5re75Yqg57uE5Lu2XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXFxuNS4gQWRkaW5nIFNwcml0ZSBjb21wb25lbnQuLi4nKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZENvbXBSZXN1bHQgPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdhZGQtY29tcG9uZW50Jywge1xuICAgICAgICAgICAgICAgIHV1aWQ6IG5vZGVVdWlkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2NjLlNwcml0ZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCBhZGRlZDonLCBhZGRDb21wUmVzdWx0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gNi4g5p+l6K+i57uE5Lu2XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXFxuNi4gUXVlcnlpbmcgY29tcG9uZW50Li4uJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wSW5mbyA9IGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3NjZW5lJywgJ3F1ZXJ5LW5vZGUtY29tcG9uZW50Jywge1xuICAgICAgICAgICAgICAgIHV1aWQ6IG5vZGVVdWlkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2NjLlNwcml0ZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCBpbmZvOicsIGNvbXBJbmZvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gNy4g5Yig6Zmk6IqC54K5XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXFxuNy4gUmVtb3ZpbmcgdGVzdCBub2RlLi4uJyk7XG4gICAgICAgICAgICBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdyZW1vdmUtbm9kZScsIHtcbiAgICAgICAgICAgICAgICB1dWlkOiBub2RlVXVpZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm9kZSByZW1vdmVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0QXNzZXRUb29scygpIHtcbiAgICBjb25zb2xlLmxvZygnXFxuPT09IFRlc3RpbmcgQXNzZXQgVG9vbHMgPT09Jyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gMS4g5p+l6K+i6LWE5rqQXG4gICAgICAgIGNvbnNvbGUubG9nKCcxLiBRdWVyeWluZyBpbWFnZSBhc3NldHMuLi4nKTtcbiAgICAgICAgY29uc3QgYXNzZXRzID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnYXNzZXQtZGInLCAncXVlcnktYXNzZXRzJywge1xuICAgICAgICAgICAgcGF0dGVybjogJyoqLyoucG5nJyxcbiAgICAgICAgICAgIGNjVHlwZTogJ2NjLkltYWdlQXNzZXQnXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgYXNzZXRzOicsIGFzc2V0cz8ubGVuZ3RoIHx8IDApO1xuICAgICAgICBcbiAgICAgICAgLy8gMi4g6I635Y+W6LWE5rqQ5L+h5oGvXG4gICAgICAgIGNvbnNvbGUubG9nKCdcXG4yLiBHZXR0aW5nIGFzc2V0IGRhdGFiYXNlIGluZm8uLi4nKTtcbiAgICAgICAgY29uc3QgYXNzZXRJbmZvID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnYXNzZXQtZGInLCAncXVlcnktYXNzZXQtaW5mbycsIHtcbiAgICAgICAgICAgIHV1aWQ6ICdkYjovL2Fzc2V0cydcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBc3NldCBpbmZvOicsIGFzc2V0SW5mbyk7XG4gICAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0UHJvamVjdFRvb2xzKCkge1xuICAgIGNvbnNvbGUubG9nKCdcXG49PT0gVGVzdGluZyBQcm9qZWN0IFRvb2xzID09PScpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIC8vIDEuIOiOt+WPlumhueebruS/oeaBr1xuICAgICAgICBjb25zb2xlLmxvZygnMS4gR2V0dGluZyBwcm9qZWN0IGluZm8uLi4nKTtcbiAgICAgICAgY29uc3QgcHJvamVjdEluZm8gPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdwcm9qZWN0JywgJ3F1ZXJ5LWluZm8nKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb2plY3QgaW5mbzonLCBwcm9qZWN0SW5mbyk7XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDmo4Dmn6XmnoTlu7rog73liptcbiAgICAgICAgY29uc29sZS5sb2coJ1xcbjIuIENoZWNraW5nIGJ1aWxkIGNhcGFiaWxpdHkuLi4nKTtcbiAgICAgICAgY29uc3QgY2FuQnVpbGQgPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdwcm9qZWN0JywgJ2Nhbi1idWlsZCcpO1xuICAgICAgICBjb25zb2xlLmxvZygnQ2FuIGJ1aWxkOicsIGNhbkJ1aWxkKTtcbiAgICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bkFsbFRlc3RzKCkge1xuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBNQ1AgU2VydmVyIFRvb2xzIFRlc3QuLi5cXG4nKTtcbiAgICBcbiAgICBhd2FpdCB0ZXN0U2NlbmVUb29scygpO1xuICAgIGF3YWl0IHRlc3RBc3NldFRvb2xzKCk7XG4gICAgYXdhaXQgdGVzdFByb2plY3RUb29scygpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdcXG49PT0gQWxsIHRlc3RzIGNvbXBsZXRlZCA9PT0nKTtcbn1cblxuLy8g5a+85Ye65Yiw5YWo5bGA77yM5pa55L6/5Zyo5o6n5Yi25Y+w6LCD55SoXG4oZ2xvYmFsIGFzIGFueSkuTUNQVGVzdCA9IHtcbiAgICB0ZXN0U2NlbmVUb29scyxcbiAgICB0ZXN0QXNzZXRUb29scyxcbiAgICB0ZXN0UHJvamVjdFRvb2xzLFxuICAgIHJ1bkFsbFRlc3RzXG59OyJdfQ==